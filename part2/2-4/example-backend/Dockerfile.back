
FROM golang:1.16

WORKDIR /usr/src/app

COPY . .

ARG PORT
ARG REDIS_HOST
ARG REQUEST_ORIGIN

RUN go build

ENV PORT=${PORT}
ENV REDIS_HOST=${REDIS_HOST}
ENV REQUEST_ORIGIN=${REQUEST_ORIGIN}

EXPOSE ${PORT}

CMD ./server 